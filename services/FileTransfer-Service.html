<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>File Transfer Service &mdash; OpenTera 1.2.6 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=010db75e"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Logging Service" href="Logging-Service.html" />
    <link rel="prev" title="API Documentation" href="teraserver/api/api_doc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            OpenTera
              <img src="../_static/LogoOpenTera200px.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.2.6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Home.html">About OpenTera</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Architecture-Overview.html">OpenTera Architecture Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Security.html">Security</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Deployment.html">Deployment Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment/DeployWithDockerCompose.html">Deploying with Docker on Linux Servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment/DeployWithLinuxNative.html">Deploying OpenTera on a Linux Server</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Services and Modules</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="OpenTera_Services.html">OpenTera Services Structure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="services.html">Core Services</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="teraserver/teraserver.html">TeraServer Service</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">File Transfer Service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#main-script">Main script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#filetransfer-config-section">FileTransfer config section</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#default-port-and-location">Default port and location</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code-snippets-and-examples-for-post-get-and-delete">Code snippets and examples for POST, GET and DELETE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#upload-a-file-using-post-request">Upload a file using POST request</a></li>
<li class="toctree-l4"><a class="reference internal" href="#file-asset-json-format-example"><code class="docutils literal notranslate"><span class="pre">file_asset</span></code> json format example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#python-requests-post-example">Python requests POST example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testing-and-generating-post-requests">Testing and generating POST requests</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#using-postman-to-test-post-queries">Using PostMan to test POST queries</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#download-and-delete-a-file-using-get-and-delete-request">Download and Delete a file using GET and DELETE request</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#web-urls-and-rest-api">Web URLs and REST API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#web-frontend">Web Frontend</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rpc-api">RPC API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Logging-Service.html">Logging Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="Videorehab-Service.html">VideoRehab Service</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developers/Developers.html">Developers setup guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/Code-Structure.html">Code structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/Service-Creation.html">Creating a new service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/Database-Structure.html">Database Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/Form-Structure.html">Internal Form Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/Messages-structure.html">Internal messages structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/Internal-services-communication-module.html">Inter-service communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/Login-and-authentication.html">Login &amp; Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="Services-Access.html">Services Access Roles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/Running-tests.html">Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/Translations.html">Translations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/Websockets-communication.html">Websockets communication</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OpenTera</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="services.html">Core Services</a></li>
      <li class="breadcrumb-item active">File Transfer Service</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/services/FileTransfer-Service.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="file-transfer-service">
<h1>File Transfer Service<a class="headerlink" href="#file-transfer-service" title="Link to this heading"></a></h1>
<p>The file transfer service is provided as a generic file repository service. While other services can also store and
manage their own assets (files), this service could also be used instead of implementing a service that only stores
files.</p>
<section id="main-script">
<h2>Main script<a class="headerlink" href="#main-script" title="Link to this heading"></a></h2>
<p>The File Transfer service can be launched by running the
<a class="reference external" href="https://github.com/introlab/opentera/blob/main/teraserver/python/services/FileTransferService/FileTransferService.py">FileTransferService.py</a>
script. As a system service, it is also launched automatically when running the
<a class="reference internal" href="teraserver/teraserver.html"><span class="std std-doc">main OpenTera service</span></a>.</p>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading"></a></h2>
<p>Configuration files for the file transfer service are similar to the basic
<a class="reference internal" href="../Configuration-files.html"><span class="doc std std-doc">configuration files</span></a>. They, however, add a specific section for that service.</p>
<section id="filetransfer-config-section">
<h3>FileTransfer config section<a class="headerlink" href="#filetransfer-config-section" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">files_directory</span></code>: the relative or full path to store transferred files on the server.</p>
</section>
</section>
<section id="default-port-and-location">
<h2>Default port and location<a class="headerlink" href="#default-port-and-location" title="Link to this heading"></a></h2>
<p>By default, the service will listen to port 4042 (non-ssl) and will be at <code class="docutils literal notranslate"><span class="pre">/file</span></code> behind the NGINX router.</p>
</section>
<section id="code-snippets-and-examples-for-post-get-and-delete">
<h2>Code snippets and examples for POST, GET and DELETE<a class="headerlink" href="#code-snippets-and-examples-for-post-get-and-delete" title="Link to this heading"></a></h2>
<section id="upload-a-file-using-post-request">
<h3>Upload a file using POST request<a class="headerlink" href="#upload-a-file-using-post-request" title="Link to this heading"></a></h3>
<p>Each file needs to be attached to a session. No session are created in the upload process - make sure that the session
exists beforehand by using the appropriate <a class="reference internal" href="teraserver/api/API.html"><span class="doc std std-doc">API</span></a>.</p>
<p>When uploading a file, you need to specify 2 mandatory components for the request:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">file_asset</span></code> describing the file itself, containing at minimum the <code class="docutils literal notranslate"><span class="pre">asset_name</span></code> and <code class="docutils literal notranslate"><span class="pre">id_session</span></code> to attach the
file to.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file</span></code> containing the data for the file itself.</p></li>
</ul>
<p>Make sure to have the token generated from the <a class="reference internal" href="../developers/Login-and-authentication.html"><span class="doc std std-doc">logging</span></a> procedure when doing
this request.</p>
<p>This is a snippet of the data to send as a .json format to the server excluding the file.
For the file part you need to specify its package which depends on the library you are using to communicate
with the server.</p>
</section>
<section id="file-asset-json-format-example">
<h3><code class="docutils literal notranslate"><span class="pre">file_asset</span></code> json format example<a class="headerlink" href="#file-asset-json-format-example" title="Link to this heading"></a></h3>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;file_asset&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;asset_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Asset Name&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;id_session&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="python-requests-post-example">
<h3>Python requests POST example<a class="headerlink" href="#python-requests-post-example" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;URL of the server with the FileTransfer API&quot;</span>

<span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;file_asset&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;id_session&quot;: &quot;Session number&quot;, &quot;asset_name&quot;: &quot;Asset Name&quot;}&#39;</span><span class="p">}</span>
<span class="n">files</span><span class="o">=</span><span class="p">[</span>
  <span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,(</span><span class="s1">&#39;filename&#39;</span><span class="p">,</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;PATH to file&#39;</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">),</span><span class="s1">&#39;application type (ex: application/zip)&#39;</span><span class="p">))</span>
<span class="p">]</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;Authorization&#39;</span><span class="p">:</span> <span class="s1">&#39;OpenTera {Previously obtained token}&#39;</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="testing-and-generating-post-requests">
<h3>Testing and generating POST requests<a class="headerlink" href="#testing-and-generating-post-requests" title="Link to this heading"></a></h3>
<p>If you want snippets in other programming languages, <a class="reference external" href="https://www.postman.com/">PostMan</a> can be used
to test API calls and get snippets of code.</p>
<section id="using-postman-to-test-post-queries">
<h4>Using PostMan to test POST queries<a class="headerlink" href="#using-postman-to-test-post-queries" title="Link to this heading"></a></h4>
<p>To generate a <strong>POST</strong> request on Postman:</p>
<ol class="arabic simple">
<li><p>Specify the body as <code class="docutils literal notranslate"><span class="pre">form-data</span></code> with the <code class="docutils literal notranslate"><span class="pre">file_asset</span></code> and <code class="docutils literal notranslate"><span class="pre">file</span></code> key.</p></li>
<li><p>Select the key type as file for the <code class="docutils literal notranslate"><span class="pre">file</span></code> and select the file you want to upload.</p></li>
<li><p>Make sure to have a token generated from the server when logging in. This API request needs a token
in the <code class="docutils literal notranslate"><span class="pre">Headers</span></code> in the format: <code class="docutils literal notranslate"><span class="pre">Authorization</span> <span class="pre">:</span> <span class="pre">OpenTera</span> <span class="pre">{{token}}</span></code>. The token can be set as a environment variable
that is updated when you launch the login GET request.</p></li>
<li><p>Click on the <code class="docutils literal notranslate"><span class="pre">Code</span></code> section and get snippets in any languages you desire.</p></li>
</ol>
</section>
</section>
<section id="download-and-delete-a-file-using-get-and-delete-request">
<h3>Download and Delete a file using GET and DELETE request<a class="headerlink" href="#download-and-delete-a-file-using-get-and-delete-request" title="Link to this heading"></a></h3>
<p>Refer to the service documentation on a running server at https://127.0.0.1:40075/file/doc</p>
</section>
</section>
<section id="web-urls-and-rest-api">
<h2>Web URLs and REST API<a class="headerlink" href="#web-urls-and-rest-api" title="Link to this heading"></a></h2>
<p><strong>Doc page</strong> - by default at https://127.0.0.1:40075/file/doc. Will display the <a class="reference internal" href="teraserver/api/API.html"><span class="doc std std-doc">REST API</span></a>
documentation and test system. Useful to test queries manually.</p>
</section>
<section id="web-frontend">
<h2>Web Frontend<a class="headerlink" href="#web-frontend" title="Link to this heading"></a></h2>
<p>Currently, no web front-end is available for that service</p>
</section>
<section id="rpc-api">
<h2>RPC API<a class="headerlink" href="#rpc-api" title="Link to this heading"></a></h2>
<p>None. This service uses the <a class="reference internal" href="../developers/Internal-services-communication-module.html"><span class="doc std std-doc">asynchronous communication system</span></a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="teraserver/api/api_doc.html" class="btn btn-neutral float-left" title="API Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Logging-Service.html" class="btn btn-neutral float-right" title="Logging Service" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Simon Brière, Dominic Létourneau.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>